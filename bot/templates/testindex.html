<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Bybit Trading</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-5">

    <h1 class="mb-4">üìà –¢–æ—Ä–≥–æ–≤–ª—è –Ω–∞ Bybit</h1>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="post" class="mb-4">
        {% csrf_token %}

        <div class="mb-2">
            <input class="form-control" type="text" name="api_key" placeholder="API Key (–¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)" required>
        </div>
        <div class="mb-2">
            <input class="form-control" type="text" name="api_secret" placeholder="API Secret (–¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)" required>
        </div>

        <div class="mb-2 d-flex gap-2">
            <button class="btn btn-secondary" type="submit" name="action" value="save_keys">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á–∏</button>
            <button class="btn btn-primary" type="submit" name="action" value="create_order" {% if not saved_keys %}disabled{% endif %}>üöÄ –°–æ–∑–¥–∞—Ç—å –æ—Ä–¥–µ—Ä</button>
        </div>

        <div class="mb-2">
            <select name="symbol" class="form-select" required>
                {% for pair in pairs %}
                    <option value="{{ pair }}">{{ pair }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-2">
            <input class="form-control" type="number" name="usd_amount" placeholder="USD —Å—É–º–º–∞" step="0.01" required>
        </div>
        <div class="mb-2">
            <input class="form-control" type="number" name="leverage" placeholder="–ü–ª–µ—á–æ" min="1" required>
        </div>
        <div class="mb-2">
            <select name="order_type" class="form-select">
                <option value="market">Market</option>
                <option value="limit">Limit</option>
            </select>
        </div>
    </form>

    {% if saved_keys %}
        <h3>üîë –í–∞—à –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á:</h3>
        <p>{{ saved_keys }}</p>
    {% endif %}

    <h3>üíπ –¢–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã</h3>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>–ü–∞—Ä–∞</th>
                <th>–¶–µ–Ω–∞</th>
            </tr>
        </thead>
        <tbody>
            {% for pair, price in prices.items %}
                <tr>
                    <td>{{ pair }}</td>
                    <td>{{ price }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

</body>
</html>
